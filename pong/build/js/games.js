var Pong={};Pong.Boot=function(t){},Pong.Boot.prototype={preload:function(){this.game.load.image("loading","assets/loading.png")},create:function(){this.game.state.start("Preloader")}},Pong.Preloader=function(t){},Pong.Preloader.prototype={preload:function(){this.stage.backgroundColor="#dfe3ee";var t=this.add.text(this.world.centerX,100,"Loading ...");t.anchor.set(.5);var e=this.add.sprite(this.world.centerX,this.world.centerY,"loading");e.anchor.setTo(.5,.5),this.load.setPreloadSprite(e),WebFontConfig={google:{families:["Inconsolata::latin"]}},this.load.script("webfont",("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"),this.load.spritesheet("buttonStart","assets/buttonStart.png",146,51),this.load.image("fullscreenButton","assets/fullscreenButton32.png"),this.load.image("pauseButton","assets/pauseButton32.png")},create:function(){this.game.state.start("MainMenu")}},Pong.MainMenu=function(t){},Pong.MainMenu.prototype={create:function(){var t=this.add.text(this.world.centerX,100,"PONG");t.anchor.set(.5),t.align="center",t.font="Arial",t.fontWeight="bold",t.fontSize=70,t.fill="#000000",t.setShadow(3,3,"rgba(0,0,0,0.5)",5);var e=this.add.text(this.world.centerX,150,"PONG");e.anchor.set(.5),e.align="center",e.scale.y=-1,e.font="Arial",e.fontWeight="bold",e.fontSize=70;var a=e.context.createLinearGradient(0,0,0,t.canvas.height);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,0.08)"),e.fill=a,this.startButton=this.add.button(this.world.centerX,225,"buttonStart",this.startGame,this,2,0,1),this.startButton.anchor.set(.5,0),this.startButton.input.useHandCursor=!0},startGame:function(){this.game.state.start("Game")}},Pong.Game=function(t){},Pong.Game.prototype={preload:function(){this.ballSprite=null,this.ballRadius=20,this.ballTexture1=null,this.ballTexture2=null,this.playerSprite=null,this.opponentSprite=null,this.betGroup=null,this.widthBet=20,this.heightBet=80,this.widthDotLine=4,this.scorePlayer=0,this.scoreOpponent=0,this.scoreTextPlayer=null,this.scoreTextOpponent=null,this.game.scale.scaleMode=Phaser.ScaleManager.NO_SCALE,this.game.scale.forceOrientation(!0,!1),this.game.scale.enterIncorrectOrientation.add(this.handleIncorrect,this),this.game.scale.leaveIncorrectOrientation.add(this.handleCorrect,this),this.load.image("fullscreenButton","assets/fullscreenButton32.png"),this.load.image("pauseButton","assets/pauseButton32.png")},create:function(){function t(){var t=r.add.button(r.world.width-42,10,"fullscreenButton",r.goFull,r);t.input.useHandCursor=!0;var e=r.add.button(r.world.width-74,10,"pauseButton",r.pauseGame,r);e.input.useHandCursor=!0}function e(){var t=r.add.bitmapData(r.world.width/2+r.widthDotLine,r.world.height);t.ctx.beginPath(),t.ctx.lineWidth=r.widthDotLine,t.ctx.strokeStyle="white",t.ctx.setLineDash([10,10]),t.ctx.moveTo(r.world.centerX,0),t.ctx.lineTo(r.world.centerX,r.world.height),t.ctx.stroke(),t.ctx.closePath(),r.add.sprite(0,0,t)}function a(){r.betGroup=r.add.group(r.world,"betGroup",!1,!0,Phaser.Physics.ARCADE),s=r.make.graphics(0,0),s.beginFill(302604),s.drawRect(0,0,r.widthBet,r.heightBet),l=r.add.renderTexture(r.widthBet,r.heightBet),l.renderXY(s,0,0,!0),r.playerSprite=r.betGroup.create(50,r.world.centerY,l),r.opponentSprite=r.betGroup.create(r.world.width-50,r.world.centerY,l),r.betGroup.callAll("anchor.set","anchor",.5),r.betGroup.setAll("body.immovable",!0)}function o(){r.playerSprite.hitArea=new Phaser.Circle(0,0,200),r.playerSprite.inputEnabled=!0,r.playerSprite.input.enableDrag(),r.playerSprite.input.boundsRect=new Phaser.Rectangle(50-r.widthBet/2,-r.heightBet/2,50+r.widthBet/2,r.world.height+r.heightBet),r.playerSprite.input.allowHorizontalDrag=!1,r.playerSprite.body.moves=!1}function i(){s=r.make.graphics(0,0),s.beginFill(16754432),s.drawCircle(r.ballRadius/2,r.ballRadius/2,r.ballRadius),r.ballTexture1=r.add.renderTexture(r.ballRadius,r.ballRadius),r.ballTexture1.renderXY(s,0,0,!0),s.beginFill(22503),s.drawCircle(r.ballRadius/2,r.ballRadius/2,r.ballRadius),r.ballTexture2=r.add.renderTexture(r.ballRadius,r.ballRadius),r.ballTexture2.renderXY(s,0,0,!0),r.ballSprite=r.add.sprite(r.world.centerX,r.world.centerY,r.ballTexture1),r.physics.enable(r.ballSprite,Phaser.Physics.ARCADE),r.ballSprite.body.velocity.setTo(300,300),r.ballSprite.body.collideWorldBounds=!0,r.ballSprite.body.bounce.set(1)}function n(){r.scoreTextPlayer=r.add.text(r.world.centerX-50,50,""+r.scorePlayer,{font:"Inconsolata",fontSize:60}),r.scoreTextPlayer.anchor.setTo(.5),r.scoreTextOpponent=r.add.text(r.world.centerX+50,50,""+r.scoreOpponent,{font:"Inconsolata",fontSize:60}),r.scoreTextOpponent.anchor.setTo(.5)}var r=this,s=null,l=null;this.physics.startSystem(Phaser.Physics.ARCADE),this.scale.fullScreenScaleMode=this.game.device.desktop?Phaser.ScaleManager.NO_SCALE:Phaser.ScaleManager.EXACT_FIT,t(),e(),n(),a(),o(),i()},update:function(){this.physics.arcade.collide(this.ballSprite,this.betGroup,this.conlisionRaqueta),this.moveOpponent(),this.movePlayer(),this.changeBallColor(),this.checkGoal()},render:function(){},setBall:function(t){this.ballSprite.x=this.world.centerX,this.ballSprite.y=this.world.centerY,"player"===t?this.ballSprite.body.velocity.setTo(-300,300):this.ballSprite.body.velocity.setTo(300,300)},changeBallColor:function(){this.ballSprite.loadTexture(Math.round(this.ballSprite.x/(this.world.width/5))%2===0?this.ballTexture2:this.ballTexture1)},checkGoal:function(){0===this.ballSprite.x?(this.setBall("opponent"),this.scoreTextOpponent.setText(this.scoreOpponent+=1),5===this.scoreOpponent&&this.game.state.start("EndMenu")):this.ballSprite.x===this.world.width-this.ballRadius&&(this.setBall("player"),this.scoreTextPlayer.setText(this.scorePlayer+=1),5===this.scorePlayer&&this.game.state.start("EndMenu"))},moveOpponent:function(){this.opponentSprite.body.velocity.y=this.opponentSprite.y-this.ballSprite.y<-15?200:this.opponentSprite.y-this.ballSprite.y>15?-200:0},movePlayer:function(){this.input.keyboard.isDown(Phaser.Keyboard.UP)&&this.playerSprite.y>0?this.playerSprite.y-=10:this.input.keyboard.isDown(Phaser.Keyboard.DOWN)&&this.playerSprite.y<this.world.height&&(this.playerSprite.y+=10)},conlisionRaqueta:function(t,e){var a=0;t.y<e.y?(a=e.y-t.y,t.body.velocity.y=-10*a):t.y>e.y?(a=t.y-e.y,t.body.velocity.y=10*a):t.body.velocity.y=2+10*Math.random()},goFull:function(){this.game.scale.isFullScreen?this.scale.stopFullScreen():this.scale.startFullScreen()},pauseGame:function(){this.physics.arcade.isPaused=this.physics.arcade.isPaused?!1:!0},handleIncorrect:function(){this.game.device.desktop||(this.game.paused=!0,document.getElementById("turn").style.display="block")},handleCorrect:function(){this.game.device.desktop||(this.game.paused=!1,document.getElementById("turn").style.display="none")}},Pong.EndMenu=function(t){},Pong.EndMenu.prototype={create:function(){var t=this.add.text(this.world.centerX,100,"Game Over");t.anchor.set(.5),t.align="center",t.font="Arial",t.fontWeight="bold",t.fontSize=70,t.fill="#000000",t.setShadow(3,3,"rgba(0,0,0,0.5)",5),this.startButton=this.add.button(this.world.centerX,225,"buttonStart",this.startGame,this,2,0,1),this.startButton.anchor.set(.5,0),this.startButton.input.useHandCursor=!0},startGame:function(){this.game.state.start("Game")}},function(){var t=new Phaser.Game(480,320,Phaser.CANVAS,"");t.state.add("Boot",Pong.Boot),t.state.add("Preloader",Pong.Preloader),t.state.add("MainMenu",Pong.MainMenu),t.state.add("Game",Pong.Game),t.state.add("EndMenu",Pong.EndMenu),t.state.start("Boot")}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAwX2Jvb3RTdGF0ZS5qcyIsIjAxX3ByZWxvYWRlclN0YXRlLmpzIiwiMDJfbWFpbk1lbnVTdGF0ZS5qcyIsIjAzX3BvbmdHYW1lLmpzIiwiMDRfZW5kU3RhdGUuanMiLCI5OV9nYW1lLmpzIl0sIm5hbWVzIjpbIlBvbmciLCJCb290IiwiZ2FtZSIsInByb3RvdHlwZSIsInByZWxvYWQiLCJ0aGlzIiwibG9hZCIsImltYWdlIiwiY3JlYXRlIiwic3RhdGUiLCJzdGFydCIsIlByZWxvYWRlciIsInN0YWdlIiwiYmFja2dyb3VuZENvbG9yIiwidGV4dCIsImFkZCIsIndvcmxkIiwiY2VudGVyWCIsImFuY2hvciIsInNldCIsImxvYWRpbmdCYXIiLCJzcHJpdGUiLCJjZW50ZXJZIiwic2V0VG8iLCJzZXRQcmVsb2FkU3ByaXRlIiwiV2ViRm9udENvbmZpZyIsImdvb2dsZSIsImZhbWlsaWVzIiwic2NyaXB0IiwiZG9jdW1lbnQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwic3ByaXRlc2hlZXQiLCJNYWluTWVudSIsImFsaWduIiwiZm9udCIsImZvbnRXZWlnaHQiLCJmb250U2l6ZSIsImZpbGwiLCJzZXRTaGFkb3ciLCJ0ZXh0UmVmbGVjdCIsInNjYWxlIiwieSIsImdyZCIsImNvbnRleHQiLCJjcmVhdGVMaW5lYXJHcmFkaWVudCIsImNhbnZhcyIsImhlaWdodCIsImFkZENvbG9yU3RvcCIsInN0YXJ0QnV0dG9uIiwiYnV0dG9uIiwic3RhcnRHYW1lIiwiaW5wdXQiLCJ1c2VIYW5kQ3Vyc29yIiwiR2FtZSIsImJhbGxTcHJpdGUiLCJiYWxsUmFkaXVzIiwiYmFsbFRleHR1cmUxIiwiYmFsbFRleHR1cmUyIiwicGxheWVyU3ByaXRlIiwib3Bwb25lbnRTcHJpdGUiLCJiZXRHcm91cCIsIndpZHRoQmV0IiwiaGVpZ2h0QmV0Iiwid2lkdGhEb3RMaW5lIiwic2NvcmVQbGF5ZXIiLCJzY29yZU9wcG9uZW50Iiwic2NvcmVUZXh0UGxheWVyIiwic2NvcmVUZXh0T3Bwb25lbnQiLCJzY2FsZU1vZGUiLCJQaGFzZXIiLCJTY2FsZU1hbmFnZXIiLCJOT19TQ0FMRSIsImZvcmNlT3JpZW50YXRpb24iLCJlbnRlckluY29ycmVjdE9yaWVudGF0aW9uIiwiaGFuZGxlSW5jb3JyZWN0IiwibGVhdmVJbmNvcnJlY3RPcmllbnRhdGlvbiIsImhhbmRsZUNvcnJlY3QiLCJjcmVhdGVCdXR0b25zIiwiZnVsbHNjcmVlbkJ1dHRvbiIsIndpZHRoIiwiZ29GdWxsIiwicGF1c2VCdXR0b24iLCJwYXVzZUdhbWUiLCJjcmVhdGVMaW5lcyIsImRvdExpbmUiLCJiaXRtYXBEYXRhIiwiY3R4IiwiYmVnaW5QYXRoIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJzZXRMaW5lRGFzaCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsImNsb3NlUGF0aCIsImNyZWF0ZUJldHMiLCJncm91cCIsIlBoeXNpY3MiLCJBUkNBREUiLCJncmFwaGljcyIsIm1ha2UiLCJiZWdpbkZpbGwiLCJkcmF3UmVjdCIsInJlbmRlclRleHR1cmUiLCJyZW5kZXJYWSIsImNhbGxBbGwiLCJzZXRBbGwiLCJwcmVwYXJlUGxheWVyQmV0IiwiaGl0QXJlYSIsIkNpcmNsZSIsImlucHV0RW5hYmxlZCIsImVuYWJsZURyYWciLCJib3VuZHNSZWN0IiwiUmVjdGFuZ2xlIiwiYWxsb3dIb3Jpem9udGFsRHJhZyIsImJvZHkiLCJtb3ZlcyIsImNyZWF0ZUJhbGwiLCJkcmF3Q2lyY2xlIiwicGh5c2ljcyIsImVuYWJsZSIsInZlbG9jaXR5IiwiY29sbGlkZVdvcmxkQm91bmRzIiwiYm91bmNlIiwiY3JlYXRlVGV4dCIsInN0YXJ0U3lzdGVtIiwiZnVsbFNjcmVlblNjYWxlTW9kZSIsImRldmljZSIsImRlc2t0b3AiLCJFWEFDVF9GSVQiLCJ1cGRhdGUiLCJhcmNhZGUiLCJjb2xsaWRlIiwiY29ubGlzaW9uUmFxdWV0YSIsIm1vdmVPcHBvbmVudCIsIm1vdmVQbGF5ZXIiLCJjaGFuZ2VCYWxsQ29sb3IiLCJjaGVja0dvYWwiLCJyZW5kZXIiLCJzZXRCYWxsIiwiZ29hbCIsIngiLCJsb2FkVGV4dHVyZSIsIk1hdGgiLCJyb3VuZCIsInNldFRleHQiLCJrZXlib2FyZCIsImlzRG93biIsIktleWJvYXJkIiwiVVAiLCJET1dOIiwiX2JhbGwiLCJfYmV0IiwiZGlmZiIsInJhbmRvbSIsImlzRnVsbFNjcmVlbiIsInN0b3BGdWxsU2NyZWVuIiwic3RhcnRGdWxsU2NyZWVuIiwiaXNQYXVzZWQiLCJwYXVzZWQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsIkVuZE1lbnUiLCJDQU5WQVMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLFFBRUFBLE1BQUFDLEtBQUEsU0FBQUMsS0FFQUYsS0FBQUMsS0FBQUUsV0FDQUMsUUFBQSxXQUNBQyxLQUFBSCxLQUFBSSxLQUFBQyxNQUFBLFVBQUEsdUJBRUFDLE9BQUEsV0FDQUgsS0FBQUgsS0FBQU8sTUFBQUMsTUFBQSxlQ1RBVixLQUFBVyxVQUFBLFNBQUFULEtBRUFGLEtBQUFXLFVBQUFSLFdBQ0FDLFFBQUEsV0FDQUMsS0FBQU8sTUFBQUMsZ0JBQUEsU0FFQSxJQUFBQyxHQUFBVCxLQUFBVSxJQUFBRCxLQUFBVCxLQUFBVyxNQUFBQyxRQUFBLElBQUEsY0FDQUgsR0FBQUksT0FBQUMsSUFBQSxHQUVBLElBQUFDLEdBQUFmLEtBQUFVLElBQUFNLE9BQUFoQixLQUFBVyxNQUFBQyxRQUFBWixLQUFBVyxNQUFBTSxRQUFBLFVBQ0FGLEdBQUFGLE9BQUFLLE1BQUEsR0FBQSxJQUNBbEIsS0FBQUMsS0FBQWtCLGlCQUFBSixHQUVBSyxlQUNBQyxRQUNBQyxVQUFBLHdCQUdBdEIsS0FBQUMsS0FBQXNCLE9BQUEsV0FBQSxVQUFBQyxTQUFBQyxTQUFBQyxTQUFBLFFBQUEsUUFDQSx5REFFQTFCLEtBQUFDLEtBQUEwQixZQUFBLGNBQUEseUJBQUEsSUFBQSxJQUNBM0IsS0FBQUMsS0FBQUMsTUFBQSxtQkFBQSxpQ0FDQUYsS0FBQUMsS0FBQUMsTUFBQSxjQUFBLDZCQUVBQyxPQUFBLFdBQ0FILEtBQUFILEtBQUFPLE1BQUFDLE1BQUEsY0MxQkFWLEtBQUFpQyxTQUFBLFNBQUEvQixLQUVBRixLQUFBaUMsU0FBQTlCLFdBQ0FLLE9BQUEsV0FDQSxHQUFBTSxHQUFBVCxLQUFBVSxJQUFBRCxLQUFBVCxLQUFBVyxNQUFBQyxRQUFBLElBQUEsT0FDQUgsR0FBQUksT0FBQUMsSUFBQSxJQUNBTCxFQUFBb0IsTUFBQSxTQUNBcEIsRUFBQXFCLEtBQUEsUUFDQXJCLEVBQUFzQixXQUFBLE9BQ0F0QixFQUFBdUIsU0FBQSxHQUNBdkIsRUFBQXdCLEtBQUEsVUFDQXhCLEVBQUF5QixVQUFBLEVBQUEsRUFBQSxrQkFBQSxFQUVBLElBQUFDLEdBQUFuQyxLQUFBVSxJQUFBRCxLQUFBVCxLQUFBVyxNQUFBQyxRQUFBLElBQUEsT0FFQXVCLEdBQUF0QixPQUFBQyxJQUFBLElBQ0FxQixFQUFBTixNQUFBLFNBQ0FNLEVBQUFDLE1BQUFDLEVBQUEsR0FFQUYsRUFBQUwsS0FBQSxRQUNBSyxFQUFBSixXQUFBLE9BQ0FJLEVBQUFILFNBQUEsRUFHQSxJQUFBTSxHQUFBSCxFQUFBSSxRQUFBQyxxQkFBQSxFQUFBLEVBQUEsRUFBQS9CLEVBQUFnQyxPQUFBQyxPQUVBSixHQUFBSyxhQUFBLEVBQUEsaUJBQ0FMLEVBQUFLLGFBQUEsRUFBQSxvQkFFQVIsRUFBQUYsS0FBQUssRUFHQXRDLEtBQUE0QyxZQUFBNUMsS0FBQVUsSUFBQW1DLE9BQUE3QyxLQUFBVyxNQUFBQyxRQUFBLElBQUEsY0FBQVosS0FBQThDLFVBQUE5QyxLQUFBLEVBQUEsRUFBQSxHQUNBQSxLQUFBNEMsWUFBQS9CLE9BQUFDLElBQUEsR0FBQSxHQUNBZCxLQUFBNEMsWUFBQUcsTUFBQUMsZUFBQSxHQUVBRixVQUFBLFdBQ0E5QyxLQUFBSCxLQUFBTyxNQUFBQyxNQUFBLFVDckNBVixLQUFBc0QsS0FBQSxTQUFBcEQsS0FFQUYsS0FBQXNELEtBQUFuRCxXQUVBQyxRQUFBLFdBQ0FDLEtBQUFrRCxXQUFBLEtBQ0FsRCxLQUFBbUQsV0FBQSxHQUNBbkQsS0FBQW9ELGFBQUEsS0FDQXBELEtBQUFxRCxhQUFBLEtBQ0FyRCxLQUFBc0QsYUFBQSxLQUNBdEQsS0FBQXVELGVBQUEsS0FDQXZELEtBQUF3RCxTQUFBLEtBQ0F4RCxLQUFBeUQsU0FBQSxHQUNBekQsS0FBQTBELFVBQUEsR0FDQTFELEtBQUEyRCxhQUFBLEVBQ0EzRCxLQUFBNEQsWUFBQSxFQUNBNUQsS0FBQTZELGNBQUEsRUFDQTdELEtBQUE4RCxnQkFBQSxLQUNBOUQsS0FBQStELGtCQUFBLEtBRUEvRCxLQUFBSCxLQUFBdUMsTUFBQTRCLFVBQUFDLE9BQUFDLGFBQUFDLFNBQ0FuRSxLQUFBSCxLQUFBdUMsTUFBQWdDLGtCQUFBLEdBQUEsR0FDQXBFLEtBQUFILEtBQUF1QyxNQUFBaUMsMEJBQUEzRCxJQUFBVixLQUFBc0UsZ0JBQUF0RSxNQUNBQSxLQUFBSCxLQUFBdUMsTUFBQW1DLDBCQUFBN0QsSUFBQVYsS0FBQXdFLGNBQUF4RSxNQUVBQSxLQUFBQyxLQUFBQyxNQUFBLG1CQUFBLGlDQUNBRixLQUFBQyxLQUFBQyxNQUFBLGNBQUEsNkJBR0FDLE9BQUEsV0FVQSxRQUFBc0UsS0FDQSxHQUFBQyxHQUFBN0UsRUFBQWEsSUFBQW1DLE9BQUFoRCxFQUFBYyxNQUFBZ0UsTUFBQSxHQUFBLEdBQUEsbUJBQUE5RSxFQUFBK0UsT0FBQS9FLEVBQ0E2RSxHQUFBM0IsTUFBQUMsZUFBQSxDQUNBLElBQUE2QixHQUFBaEYsRUFBQWEsSUFBQW1DLE9BQUFoRCxFQUFBYyxNQUFBZ0UsTUFBQSxHQUFBLEdBQUEsY0FBQTlFLEVBQUFpRixVQUFBakYsRUFDQWdGLEdBQUE5QixNQUFBQyxlQUFBLEVBR0EsUUFBQStCLEtBQ0EsR0FBQUMsR0FBQW5GLEVBQUFhLElBQUF1RSxXQUFBcEYsRUFBQWMsTUFBQWdFLE1BQUEsRUFBQTlFLEVBQUE4RCxhQUFBOUQsRUFBQWMsTUFBQStCLE9BRUFzQyxHQUFBRSxJQUFBQyxZQUNBSCxFQUFBRSxJQUFBRSxVQUFBdkYsRUFBQThELGFBQ0FxQixFQUFBRSxJQUFBRyxZQUFBLFFBQ0FMLEVBQUFFLElBQUFJLGFBQUEsR0FBQSxLQUNBTixFQUFBRSxJQUFBSyxPQUFBMUYsRUFBQWMsTUFBQUMsUUFBQSxHQUNBb0UsRUFBQUUsSUFBQU0sT0FBQTNGLEVBQUFjLE1BQUFDLFFBQUFmLEVBQUFjLE1BQUErQixRQUNBc0MsRUFBQUUsSUFBQU8sU0FDQVQsRUFBQUUsSUFBQVEsWUFDQTdGLEVBQUFhLElBQUFNLE9BQUEsRUFBQSxFQUFBZ0UsR0FHQSxRQUFBVyxLQUNBOUYsRUFBQTJELFNBQUEzRCxFQUFBYSxJQUFBa0YsTUFBQS9GLEVBQUFjLE1BQUEsWUFBQSxHQUFBLEVBQUFzRCxPQUFBNEIsUUFBQUMsUUFFQUMsRUFBQWxHLEVBQUFtRyxLQUFBRCxTQUFBLEVBQUEsR0FDQUEsRUFBQUUsVUFBQSxRQUNBRixFQUFBRyxTQUFBLEVBQUEsRUFBQXJHLEVBQUE0RCxTQUFBNUQsRUFBQTZELFdBRUF5QyxFQUFBdEcsRUFBQWEsSUFBQXlGLGNBQUF0RyxFQUFBNEQsU0FBQTVELEVBQUE2RCxXQUNBeUMsRUFBQUMsU0FBQUwsRUFBQSxFQUFBLEdBQUEsR0FFQWxHLEVBQUF5RCxhQUFBekQsRUFBQTJELFNBQUFyRCxPQUFBLEdBQUFOLEVBQUFjLE1BQUFNLFFBQUFrRixHQUNBdEcsRUFBQTBELGVBQUExRCxFQUFBMkQsU0FBQXJELE9BQUFOLEVBQUFjLE1BQUFnRSxNQUFBLEdBQUE5RSxFQUFBYyxNQUFBTSxRQUFBa0YsR0FFQXRHLEVBQUEyRCxTQUFBNkMsUUFBQSxhQUFBLFNBQUEsSUFDQXhHLEVBQUEyRCxTQUFBOEMsT0FBQSxrQkFBQSxHQUdBLFFBQUFDLEtBQ0ExRyxFQUFBeUQsYUFBQWtELFFBQUEsR0FBQXZDLFFBQUF3QyxPQUFBLEVBQUEsRUFBQSxLQUNBNUcsRUFBQXlELGFBQUFvRCxjQUFBLEVBQ0E3RyxFQUFBeUQsYUFBQVAsTUFBQTRELGFBQ0E5RyxFQUFBeUQsYUFBQVAsTUFBQTZELFdBQUEsR0FBQTNDLFFBQUE0QyxVQUFBLEdBQUFoSCxFQUFBNEQsU0FBQSxHQUNBNUQsRUFBQTZELFVBQUEsRUFDQSxHQUFBN0QsRUFBQTRELFNBQUEsRUFDQTVELEVBQUFjLE1BQUErQixPQUFBN0MsRUFBQTZELFdBQ0E3RCxFQUFBeUQsYUFBQVAsTUFBQStELHFCQUFBLEVBQ0FqSCxFQUFBeUQsYUFBQXlELEtBQUFDLE9BQUEsRUFHQSxRQUFBQyxLQUNBbEIsRUFBQWxHLEVBQUFtRyxLQUFBRCxTQUFBLEVBQUEsR0FDQUEsRUFBQUUsVUFBQSxVQUNBRixFQUFBbUIsV0FBQXJILEVBQUFzRCxXQUFBLEVBQUF0RCxFQUFBc0QsV0FBQSxFQUFBdEQsRUFBQXNELFlBRUF0RCxFQUFBdUQsYUFBQXZELEVBQUFhLElBQUF5RixjQUFBdEcsRUFBQXNELFdBQUF0RCxFQUFBc0QsWUFDQXRELEVBQUF1RCxhQUFBZ0QsU0FBQUwsRUFBQSxFQUFBLEdBQUEsR0FFQUEsRUFBQUUsVUFBQSxPQUNBRixFQUFBbUIsV0FBQXJILEVBQUFzRCxXQUFBLEVBQUF0RCxFQUFBc0QsV0FBQSxFQUFBdEQsRUFBQXNELFlBRUF0RCxFQUFBd0QsYUFBQXhELEVBQUFhLElBQUF5RixjQUFBdEcsRUFBQXNELFdBQUF0RCxFQUFBc0QsWUFDQXRELEVBQUF3RCxhQUFBK0MsU0FBQUwsRUFBQSxFQUFBLEdBQUEsR0FFQWxHLEVBQUFxRCxXQUFBckQsRUFBQWEsSUFBQU0sT0FBQW5CLEVBQUFjLE1BQUFDLFFBQUFmLEVBQUFjLE1BQUFNLFFBQUFwQixFQUFBdUQsY0FFQXZELEVBQUFzSCxRQUFBQyxPQUFBdkgsRUFBQXFELFdBQUFlLE9BQUE0QixRQUFBQyxRQUVBakcsRUFBQXFELFdBQUE2RCxLQUFBTSxTQUFBbkcsTUFBQSxJQUFBLEtBQ0FyQixFQUFBcUQsV0FBQTZELEtBQUFPLG9CQUFBLEVBQ0F6SCxFQUFBcUQsV0FBQTZELEtBQUFRLE9BQUF6RyxJQUFBLEdBR0EsUUFBQTBHLEtBQ0EzSCxFQUFBaUUsZ0JBQUFqRSxFQUFBYSxJQUFBRCxLQUFBWixFQUFBYyxNQUFBQyxRQUFBLEdBQUEsR0FBQSxHQUFBZixFQUFBK0QsYUFDQTlCLEtBQUEsY0FBQUUsU0FBQSxLQUNBbkMsRUFBQWlFLGdCQUFBakQsT0FBQUssTUFBQSxJQUVBckIsRUFBQWtFLGtCQUFBbEUsRUFBQWEsSUFBQUQsS0FBQVosRUFBQWMsTUFBQUMsUUFBQSxHQUFBLEdBQUEsR0FBQWYsRUFBQWdFLGVBQ0EvQixLQUFBLGNBQUFFLFNBQUEsS0FDQW5DLEVBQUFrRSxrQkFBQWxELE9BQUFLLE1BQUEsSUF6RkEsR0FBQXJCLEdBQUFHLEtBQ0ErRixFQUFBLEtBQ0FJLEVBQUEsSUFFQW5HLE1BQUFtSCxRQUFBTSxZQUFBeEQsT0FBQTRCLFFBQUFDLFFBRUE5RixLQUFBb0MsTUFBQXNGLG9CQUFBMUgsS0FBQUgsS0FBQThILE9BQUFDLFFBQUEzRCxPQUFBQyxhQUFBQyxTQUNBRixPQUFBQyxhQUFBMkQsVUFxRkFwRCxJQUNBTSxJQUNBeUMsSUFDQTdCLElBQ0FZLElBQ0FVLEtBR0FhLE9BQUEsV0FDQTlILEtBQUFtSCxRQUFBWSxPQUFBQyxRQUFBaEksS0FBQWtELFdBQUFsRCxLQUFBd0QsU0FBQXhELEtBQUFpSSxrQkFDQWpJLEtBQUFrSSxlQUNBbEksS0FBQW1JLGFBQ0FuSSxLQUFBb0ksa0JBQ0FwSSxLQUFBcUksYUFHQUMsT0FBQSxhQU9BQyxRQUFBLFNBQUFDLEdBQ0F4SSxLQUFBa0QsV0FBQXVGLEVBQUF6SSxLQUFBVyxNQUFBQyxRQUNBWixLQUFBa0QsV0FBQWIsRUFBQXJDLEtBQUFXLE1BQUFNLFFBQ0EsV0FBQXVILEVBQUF4SSxLQUFBa0QsV0FBQTZELEtBQUFNLFNBQUFuRyxNQUFBLEtBQUEsS0FDQWxCLEtBQUFrRCxXQUFBNkQsS0FBQU0sU0FBQW5HLE1BQUEsSUFBQSxNQUdBa0gsZ0JBQUEsV0FDQXBJLEtBQUFrRCxXQUFBd0YsWUFBQUMsS0FBQUMsTUFBQTVJLEtBQUFrRCxXQUFBdUYsR0FBQXpJLEtBQUFXLE1BQUFnRSxNQUFBLElBQUEsSUFBQSxFQUFBM0UsS0FBQXFELGFBQ0FyRCxLQUFBb0QsZUFHQWlGLFVBQUEsV0FDQSxJQUFBckksS0FBQWtELFdBQUF1RixHQUNBekksS0FBQXVJLFFBQUEsWUFDQXZJLEtBQUErRCxrQkFBQThFLFFBQUE3SSxLQUFBNkQsZUFBQSxHQUNBLElBQUE3RCxLQUFBNkQsZUFDQTdELEtBQUFILEtBQUFPLE1BQUFDLE1BQUEsWUFDQUwsS0FBQWtELFdBQUF1RixJQUFBekksS0FBQVcsTUFBQWdFLE1BQUEzRSxLQUFBbUQsYUFDQW5ELEtBQUF1SSxRQUFBLFVBQ0F2SSxLQUFBOEQsZ0JBQUErRSxRQUFBN0ksS0FBQTRELGFBQUEsR0FDQSxJQUFBNUQsS0FBQTRELGFBQ0E1RCxLQUFBSCxLQUFBTyxNQUFBQyxNQUFBLGFBSUE2SCxhQUFBLFdBRUFsSSxLQUFBdUQsZUFBQXdELEtBQUFNLFNBQUFoRixFQURBckMsS0FBQXVELGVBQUFsQixFQUFBckMsS0FBQWtELFdBQUFiLEVBQUEsSUFDQSxJQUNBckMsS0FBQXVELGVBQUFsQixFQUFBckMsS0FBQWtELFdBQUFiLEVBQUEsR0FDQSxLQUVBLEdBSUE4RixXQUFBLFdBQ0FuSSxLQUFBK0MsTUFBQStGLFNBQUFDLE9BQUE5RSxPQUFBK0UsU0FBQUMsS0FBQWpKLEtBQUFzRCxhQUFBakIsRUFBQSxFQUNBckMsS0FBQXNELGFBQUFqQixHQUFBLEdBQ0FyQyxLQUFBK0MsTUFBQStGLFNBQUFDLE9BQUE5RSxPQUFBK0UsU0FBQUUsT0FBQWxKLEtBQUFzRCxhQUFBakIsRUFBQXJDLEtBQUFXLE1BQUErQixTQUNBMUMsS0FBQXNELGFBQUFqQixHQUFBLEtBSUE0RixpQkFBQSxTQUFBa0IsRUFBQUMsR0FDQSxHQUFBQyxHQUFBLENBQ0FGLEdBQUE5RyxFQUFBK0csRUFBQS9HLEdBQ0FnSCxFQUFBRCxFQUFBL0csRUFBQThHLEVBQUE5RyxFQUNBOEcsRUFBQXBDLEtBQUFNLFNBQUFoRixFQUFBLElBQUFnSCxHQUNBRixFQUFBOUcsRUFBQStHLEVBQUEvRyxHQUNBZ0gsRUFBQUYsRUFBQTlHLEVBQUErRyxFQUFBL0csRUFDQThHLEVBQUFwQyxLQUFBTSxTQUFBaEYsRUFBQSxHQUFBZ0gsR0FFQUYsRUFBQXBDLEtBQUFNLFNBQUFoRixFQUFBLEVBQUEsR0FBQXNHLEtBQUFXLFVBSUExRSxPQUFBLFdBQ0E1RSxLQUFBSCxLQUFBdUMsTUFBQW1ILGFBQUF2SixLQUFBb0MsTUFBQW9ILGlCQUFBeEosS0FBQW9DLE1BQUFxSCxtQkFHQTNFLFVBQUEsV0FDQTlFLEtBQUFtSCxRQUFBWSxPQUFBMkIsU0FBQTFKLEtBQUFtSCxRQUFBWSxPQUFBLFVBQUEsR0FBQSxHQUdBekQsZ0JBQUEsV0FDQXRFLEtBQUFILEtBQUE4SCxPQUFBQyxVQUNBNUgsS0FBQUgsS0FBQThKLFFBQUEsRUFDQW5JLFNBQUFvSSxlQUFBLFFBQUFDLE1BQUFDLFFBQUEsVUFJQXRGLGNBQUEsV0FDQXhFLEtBQUFILEtBQUE4SCxPQUFBQyxVQUNBNUgsS0FBQUgsS0FBQThKLFFBQUEsRUFDQW5JLFNBQUFvSSxlQUFBLFFBQUFDLE1BQUFDLFFBQUEsVUM1TkFuSyxLQUFBb0ssUUFBQSxTQUFBbEssS0FFQUYsS0FBQW9LLFFBQUFqSyxXQUNBSyxPQUFBLFdBQ0EsR0FBQU0sR0FBQVQsS0FBQVUsSUFBQUQsS0FBQVQsS0FBQVcsTUFBQUMsUUFBQSxJQUFBLFlBQ0FILEdBQUFJLE9BQUFDLElBQUEsSUFDQUwsRUFBQW9CLE1BQUEsU0FDQXBCLEVBQUFxQixLQUFBLFFBQ0FyQixFQUFBc0IsV0FBQSxPQUNBdEIsRUFBQXVCLFNBQUEsR0FDQXZCLEVBQUF3QixLQUFBLFVBQ0F4QixFQUFBeUIsVUFBQSxFQUFBLEVBQUEsa0JBQUEsR0FFQWxDLEtBQUE0QyxZQUFBNUMsS0FBQVUsSUFBQW1DLE9BQUE3QyxLQUFBVyxNQUFBQyxRQUFBLElBQUEsY0FBQVosS0FBQThDLFVBQUE5QyxLQUFBLEVBQUEsRUFBQSxHQUNBQSxLQUFBNEMsWUFBQS9CLE9BQUFDLElBQUEsR0FBQSxHQUNBZCxLQUFBNEMsWUFBQUcsTUFBQUMsZUFBQSxHQUVBRixVQUFBLFdBQ0E5QyxLQUFBSCxLQUFBTyxNQUFBQyxNQUFBLFVDbEJBLFdBQ0EsR0FBQVIsR0FBQSxHQUFBb0UsUUFBQWhCLEtBQUEsSUFBQSxJQUFBZ0IsT0FBQStGLE9BQUEsR0FDQW5LLEdBQUFPLE1BQUFNLElBQUEsT0FBQWYsS0FBQUMsTUFDQUMsRUFBQU8sTUFBQU0sSUFBQSxZQUFBZixLQUFBVyxXQUNBVCxFQUFBTyxNQUFBTSxJQUFBLFdBQUFmLEtBQUFpQyxVQUNBL0IsRUFBQU8sTUFBQU0sSUFBQSxPQUFBZixLQUFBc0QsTUFDQXBELEVBQUFPLE1BQUFNLElBQUEsVUFBQWYsS0FBQW9LLFNBRUFsSyxFQUFBTyxNQUFBQyxNQUFBIiwiZmlsZSI6ImdhbWVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFBvbmcgPSB7fTtcclxuXHJcblBvbmcuQm9vdCA9IGZ1bmN0aW9uKGdhbWUpIHt9O1xyXG5cclxuUG9uZy5Cb290LnByb3RvdHlwZSA9IHtcclxuICBwcmVsb2FkOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKFwibG9hZGluZ1wiLFwiYXNzZXRzL2xvYWRpbmcucG5nXCIpOyBcclxuICB9LFxyXG4gIGNyZWF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1ByZWxvYWRlcicpO1xyXG4gIH1cclxufTsiLCJQb25nLlByZWxvYWRlciA9IGZ1bmN0aW9uKGdhbWUpIHt9O1xyXG5cclxuUG9uZy5QcmVsb2FkZXIucHJvdG90eXBlID0ge1xyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2RmZTNlZSc7XHJcbiAgICBcclxuICAgIHZhciB0ZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLndvcmxkLmNlbnRlclgsIDEwMCwgXCJMb2FkaW5nIC4uLlwiKTtcclxuICAgIHRleHQuYW5jaG9yLnNldCgwLjUpO1xyXG5cclxuICAgIHZhciBsb2FkaW5nQmFyID0gdGhpcy5hZGQuc3ByaXRlKHRoaXMud29ybGQuY2VudGVyWCwgdGhpcy53b3JsZC5jZW50ZXJZLFwibG9hZGluZ1wiKTtcclxuICAgIGxvYWRpbmdCYXIuYW5jaG9yLnNldFRvKDAuNSwwLjUpO1xyXG4gICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUobG9hZGluZ0Jhcik7XHJcbiAgICBcclxuICAgIFdlYkZvbnRDb25maWcgPSB7XHJcbiAgICAgICAgZ29vZ2xlOiB7XHJcbiAgICAgICAgICAgIGZhbWlsaWVzOiBbJ0luY29uc29sYXRhOjpsYXRpbiddXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMubG9hZC5zY3JpcHQoJ3dlYmZvbnQnLCAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHMnIDogJ2h0dHAnKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy93ZWJmb250LzEvd2ViZm9udC5qcycpO1xyXG4gICAgXHJcbiAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ2J1dHRvblN0YXJ0JywgJ2Fzc2V0cy9idXR0b25TdGFydC5wbmcnLCAxNDYsIDUxKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnZnVsbHNjcmVlbkJ1dHRvbicsJ2Fzc2V0cy9mdWxsc2NyZWVuQnV0dG9uMzIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BhdXNlQnV0dG9uJywnYXNzZXRzL3BhdXNlQnV0dG9uMzIucG5nJyk7XHJcbn0sXHJcbiAgY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWFpbk1lbnUnKTtcclxuICB9XHJcbn07IiwiUG9uZy5NYWluTWVudSA9IGZ1bmN0aW9uKGdhbWUpIHt9O1xyXG5cclxuUG9uZy5NYWluTWVudS5wcm90b3R5cGUgPSB7XHJcbiAgY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciB0ZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLndvcmxkLmNlbnRlclgsIDEwMCwgXCJQT05HXCIpO1xyXG4gICAgdGV4dC5hbmNob3Iuc2V0KDAuNSk7XHJcbiAgICB0ZXh0LmFsaWduID0gJ2NlbnRlcic7XHJcbiAgICB0ZXh0LmZvbnQgPSAnQXJpYWwnO1xyXG4gICAgdGV4dC5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgdGV4dC5mb250U2l6ZSA9IDcwO1xyXG4gICAgdGV4dC5maWxsID0gJyMwMDAwMDAnO1xyXG4gICAgdGV4dC5zZXRTaGFkb3coMywgMywgJ3JnYmEoMCwwLDAsMC41KScsIDUpO1xyXG4gICAgXHJcbiAgICB2YXIgdGV4dFJlZmxlY3QgPSB0aGlzLmFkZC50ZXh0KHRoaXMud29ybGQuY2VudGVyWCwgMTUwLCBcIlBPTkdcIik7XHJcbiAgICAvLyAgQ2VudGVycyB0aGUgdGV4dFxyXG4gICAgdGV4dFJlZmxlY3QuYW5jaG9yLnNldCgwLjUpO1xyXG4gICAgdGV4dFJlZmxlY3QuYWxpZ24gPSAnY2VudGVyJztcclxuICAgIHRleHRSZWZsZWN0LnNjYWxlLnkgPSAtMTtcclxuICAgIC8vICBPdXIgZm9udCArIHNpemVcclxuICAgIHRleHRSZWZsZWN0LmZvbnQgPSAnQXJpYWwnO1xyXG4gICAgdGV4dFJlZmxlY3QuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgIHRleHRSZWZsZWN0LmZvbnRTaXplID0gNzA7XHJcbiAgICAvLyAgSGVyZSB3ZSBjcmVhdGUgYSBsaW5lYXIgZ3JhZGllbnQgb24gdGhlIFRleHQgY29udGV4dC5cclxuICAgIC8vICBUaGlzIHVzZXMgdGhlIGV4YWN0IHNhbWUgbWV0aG9kIG9mIGNyZWF0aW5nIGEgZ3JhZGllbnQgYXMgeW91IGRvIG9uIGEgbm9ybWFsIENhbnZhcyBjb250ZXh0LlxyXG4gICAgdmFyIGdyZCA9IHRleHRSZWZsZWN0LmNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMCwgdGV4dC5jYW52YXMuaGVpZ2h0KTtcclxuICAgIC8vICBBZGQgaW4gMiBjb2xvciBzdG9wc1xyXG4gICAgZ3JkLmFkZENvbG9yU3RvcCgwLCAncmdiYSgwLDAsMCwwKScpO1xyXG4gICAgZ3JkLmFkZENvbG9yU3RvcCgxLCAncmdiYSgwLDAsMCwwLjA4KScpO1xyXG4gICAgLy8gIEFuZCBhcHBseSB0byB0aGUgVGV4dFxyXG4gICAgdGV4dFJlZmxlY3QuZmlsbCA9IGdyZDtcclxuXHJcblxyXG4gICAgdGhpcy5zdGFydEJ1dHRvbiA9IHRoaXMuYWRkLmJ1dHRvbih0aGlzLndvcmxkLmNlbnRlclgsIDIyNSwgJ2J1dHRvblN0YXJ0JywgdGhpcy5zdGFydEdhbWUsIHRoaXMsIDIsIDAsIDEpO1xyXG4gICAgdGhpcy5zdGFydEJ1dHRvbi5hbmNob3Iuc2V0KDAuNSwwKTtcclxuICAgIHRoaXMuc3RhcnRCdXR0b24uaW5wdXQudXNlSGFuZEN1cnNvciA9IHRydWU7XHJcbiAgfSxcclxuICBzdGFydEdhbWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lJyk7XHJcbiAgfVxyXG59OyIsIlBvbmcuR2FtZSA9IGZ1bmN0aW9uKGdhbWUpIHt9O1xyXG5cclxuUG9uZy5HYW1lLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcHJlbG9hZDogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmJhbGxTcHJpdGUgICAgICAgID0gbnVsbCxcclxuICAgIHRoaXMuYmFsbFJhZGl1cyAgICAgICAgPSAyMCxcclxuICAgIHRoaXMuYmFsbFRleHR1cmUxICAgICAgPSBudWxsLFxyXG4gICAgdGhpcy5iYWxsVGV4dHVyZTIgICAgICA9IG51bGwsXHJcbiAgICB0aGlzLnBsYXllclNwcml0ZSAgICAgID0gbnVsbCwgXHJcbiAgICB0aGlzLm9wcG9uZW50U3ByaXRlICAgID0gbnVsbCwgXHJcbiAgICB0aGlzLmJldEdyb3VwICAgICAgICAgID0gbnVsbCxcclxuICAgIHRoaXMud2lkdGhCZXQgICAgICAgICAgPSAyMCxcclxuICAgIHRoaXMuaGVpZ2h0QmV0ICAgICAgICAgPSA4MCxcclxuICAgIHRoaXMud2lkdGhEb3RMaW5lICAgICAgPSA0LFxyXG4gICAgdGhpcy5zY29yZVBsYXllciAgICAgICA9IDAsXHJcbiAgICB0aGlzLnNjb3JlT3Bwb25lbnQgICAgID0gMCxcclxuICAgIHRoaXMuc2NvcmVUZXh0UGxheWVyICAgPSBudWxsLFxyXG4gICAgdGhpcy5zY29yZVRleHRPcHBvbmVudCA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5nYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuTk9fU0NBTEU7XHJcbiAgICB0aGlzLmdhbWUuc2NhbGUuZm9yY2VPcmllbnRhdGlvbih0cnVlLCBmYWxzZSk7XHJcbiAgICB0aGlzLmdhbWUuc2NhbGUuZW50ZXJJbmNvcnJlY3RPcmllbnRhdGlvbi5hZGQodGhpcy5oYW5kbGVJbmNvcnJlY3QsIHRoaXMpO1xyXG4gICAgdGhpcy5nYW1lLnNjYWxlLmxlYXZlSW5jb3JyZWN0T3JpZW50YXRpb24uYWRkKHRoaXMuaGFuZGxlQ29ycmVjdCwgdGhpcyk7XHJcbiAgICBcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnZnVsbHNjcmVlbkJ1dHRvbicsJ2Fzc2V0cy9mdWxsc2NyZWVuQnV0dG9uMzIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BhdXNlQnV0dG9uJywnYXNzZXRzL3BhdXNlQnV0dG9uMzIucG5nJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBnYW1lICAgICAgICAgID0gdGhpcyxcclxuICAgICAgICBncmFwaGljcyAgICAgID0gbnVsbCxcclxuICAgICAgICByZW5kZXJUZXh0dXJlID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuICAgIFxyXG4gICAgdGhpcy5zY2FsZS5mdWxsU2NyZWVuU2NhbGVNb2RlID0gdGhpcy5nYW1lLmRldmljZS5kZXNrdG9wID8gUGhhc2VyLlNjYWxlTWFuYWdlci5OT19TQ0FMRSA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGhhc2VyLlNjYWxlTWFuYWdlci5FWEFDVF9GSVQ7XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQnV0dG9ucygpIHtcclxuICAgICAgdmFyIGZ1bGxzY3JlZW5CdXR0b24gPSBnYW1lLmFkZC5idXR0b24oZ2FtZS53b3JsZC53aWR0aC00MiwgMTAsIFwiZnVsbHNjcmVlbkJ1dHRvblwiLCBnYW1lLmdvRnVsbCwgZ2FtZSk7XHJcbiAgICAgIGZ1bGxzY3JlZW5CdXR0b24uaW5wdXQudXNlSGFuZEN1cnNvciA9IHRydWU7XHJcbiAgICAgIHZhciBwYXVzZUJ1dHRvbiA9IGdhbWUuYWRkLmJ1dHRvbihnYW1lLndvcmxkLndpZHRoLTc0LCAxMCwgXCJwYXVzZUJ1dHRvblwiLCBnYW1lLnBhdXNlR2FtZSwgZ2FtZSk7XHJcbiAgICAgIHBhdXNlQnV0dG9uLmlucHV0LnVzZUhhbmRDdXJzb3IgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpbmVzKCkge1xyXG4gICAgIHZhciBkb3RMaW5lID0gZ2FtZS5hZGQuYml0bWFwRGF0YShnYW1lLndvcmxkLndpZHRoLzIgKyBnYW1lLndpZHRoRG90TGluZSwgZ2FtZS53b3JsZC5oZWlnaHQpO1xyXG4gIFxyXG4gICAgICBkb3RMaW5lLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgZG90TGluZS5jdHgubGluZVdpZHRoID0gZ2FtZS53aWR0aERvdExpbmU7XHJcbiAgICAgIGRvdExpbmUuY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcclxuICAgICAgZG90TGluZS5jdHguc2V0TGluZURhc2goWzEwLCAxMF0pO1xyXG4gICAgICBkb3RMaW5lLmN0eC5tb3ZlVG8oZ2FtZS53b3JsZC5jZW50ZXJYLCAwKTtcclxuICAgICAgZG90TGluZS5jdHgubGluZVRvKGdhbWUud29ybGQuY2VudGVyWCwgZ2FtZS53b3JsZC5oZWlnaHQpO1xyXG4gICAgICBkb3RMaW5lLmN0eC5zdHJva2UoKTtcclxuICAgICAgZG90TGluZS5jdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgIGdhbWUuYWRkLnNwcml0ZSgwLCAwLCBkb3RMaW5lKTsgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQmV0cygpIHtcclxuICAgICAgZ2FtZS5iZXRHcm91cCA9IGdhbWUuYWRkLmdyb3VwKGdhbWUud29ybGQsICdiZXRHcm91cCcsIGZhbHNlLCB0cnVlLCBQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xyXG4gICAgICBcclxuICAgICAgZ3JhcGhpY3MgPSBnYW1lLm1ha2UuZ3JhcGhpY3MoMCwwKTtcclxuICAgICAgZ3JhcGhpY3MuYmVnaW5GaWxsKDB4MDQ5ZTBjKTtcclxuICAgICAgZ3JhcGhpY3MuZHJhd1JlY3QoMCwgMCwgZ2FtZS53aWR0aEJldCwgZ2FtZS5oZWlnaHRCZXQpO1xyXG4gICAgICBcclxuICAgICAgcmVuZGVyVGV4dHVyZSA9IGdhbWUuYWRkLnJlbmRlclRleHR1cmUoZ2FtZS53aWR0aEJldCwgZ2FtZS5oZWlnaHRCZXQpO1xyXG4gICAgICByZW5kZXJUZXh0dXJlLnJlbmRlclhZKGdyYXBoaWNzLCAwLCAwLCB0cnVlKTtcclxuICAgICAgXHJcbiAgICAgIGdhbWUucGxheWVyU3ByaXRlID0gZ2FtZS5iZXRHcm91cC5jcmVhdGUoNTAsIGdhbWUud29ybGQuY2VudGVyWSwgcmVuZGVyVGV4dHVyZSk7XHJcbiAgICAgIGdhbWUub3Bwb25lbnRTcHJpdGUgPSBnYW1lLmJldEdyb3VwLmNyZWF0ZShnYW1lLndvcmxkLndpZHRoIC0gNTAsIGdhbWUud29ybGQuY2VudGVyWSwgcmVuZGVyVGV4dHVyZSk7XHJcblxyXG4gICAgICBnYW1lLmJldEdyb3VwLmNhbGxBbGwoJ2FuY2hvci5zZXQnLCAnYW5jaG9yJywgMC41KTtcclxuICAgICAgZ2FtZS5iZXRHcm91cC5zZXRBbGwoJ2JvZHkuaW1tb3ZhYmxlJywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlcGFyZVBsYXllckJldCgpIHtcclxuICAgICAgZ2FtZS5wbGF5ZXJTcHJpdGUuaGl0QXJlYSA9IG5ldyBQaGFzZXIuQ2lyY2xlKDAsIDAsIDIwMCk7XHJcbiAgICAgIGdhbWUucGxheWVyU3ByaXRlLmlucHV0RW5hYmxlZCA9IHRydWU7XHJcbiAgICAgIGdhbWUucGxheWVyU3ByaXRlLmlucHV0LmVuYWJsZURyYWcoKTtcclxuICAgICAgZ2FtZS5wbGF5ZXJTcHJpdGUuaW5wdXQuYm91bmRzUmVjdCA9IG5ldyBQaGFzZXIuUmVjdGFuZ2xlKDUwIC0gZ2FtZS53aWR0aEJldC8yLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtZ2FtZS5oZWlnaHRCZXQvMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAgKyBnYW1lLndpZHRoQmV0LzIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUud29ybGQuaGVpZ2h0ICsgZ2FtZS5oZWlnaHRCZXQpO1xyXG4gICAgICBnYW1lLnBsYXllclNwcml0ZS5pbnB1dC5hbGxvd0hvcml6b250YWxEcmFnID0gZmFsc2U7XHJcbiAgICAgIGdhbWUucGxheWVyU3ByaXRlLmJvZHkubW92ZXMgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVCYWxsKCkge1xyXG4gICAgICBncmFwaGljcyA9IGdhbWUubWFrZS5ncmFwaGljcygwLDApO1xyXG4gICAgICBncmFwaGljcy5iZWdpbkZpbGwoMHhmZmE3MDApO1xyXG4gICAgICBncmFwaGljcy5kcmF3Q2lyY2xlKGdhbWUuYmFsbFJhZGl1cy8yLCBnYW1lLmJhbGxSYWRpdXMvMiwgZ2FtZS5iYWxsUmFkaXVzKTtcclxuICAgICAgXHJcbiAgICAgIGdhbWUuYmFsbFRleHR1cmUxID0gZ2FtZS5hZGQucmVuZGVyVGV4dHVyZShnYW1lLmJhbGxSYWRpdXMsIGdhbWUuYmFsbFJhZGl1cyk7XHJcbiAgICAgIGdhbWUuYmFsbFRleHR1cmUxLnJlbmRlclhZKGdyYXBoaWNzLCAwLCAwLCB0cnVlKTtcclxuICAgICAgXHJcbiAgICAgIGdyYXBoaWNzLmJlZ2luRmlsbCgweDAwNTdlNyk7XHJcbiAgICAgIGdyYXBoaWNzLmRyYXdDaXJjbGUoZ2FtZS5iYWxsUmFkaXVzLzIsIGdhbWUuYmFsbFJhZGl1cy8yLCBnYW1lLmJhbGxSYWRpdXMpO1xyXG5cclxuICAgICAgZ2FtZS5iYWxsVGV4dHVyZTIgPSBnYW1lLmFkZC5yZW5kZXJUZXh0dXJlKGdhbWUuYmFsbFJhZGl1cywgZ2FtZS5iYWxsUmFkaXVzKTtcclxuICAgICAgZ2FtZS5iYWxsVGV4dHVyZTIucmVuZGVyWFkoZ3JhcGhpY3MsIDAsIDAsIHRydWUpO1xyXG4gICAgICBcclxuICAgICAgZ2FtZS5iYWxsU3ByaXRlID0gZ2FtZS5hZGQuc3ByaXRlKGdhbWUud29ybGQuY2VudGVyWCwgZ2FtZS53b3JsZC5jZW50ZXJZLCBnYW1lLmJhbGxUZXh0dXJlMSk7XHJcblxyXG4gICAgICBnYW1lLnBoeXNpY3MuZW5hYmxlKGdhbWUuYmFsbFNwcml0ZSwgUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuICAgICAgXHJcbiAgICAgIGdhbWUuYmFsbFNwcml0ZS5ib2R5LnZlbG9jaXR5LnNldFRvKDMwMCwgMzAwKTtcclxuICAgICAgZ2FtZS5iYWxsU3ByaXRlLmJvZHkuY29sbGlkZVdvcmxkQm91bmRzID0gdHJ1ZTtcclxuICAgICAgZ2FtZS5iYWxsU3ByaXRlLmJvZHkuYm91bmNlLnNldCgxKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVUZXh0KCkge1xyXG4gICAgICBnYW1lLnNjb3JlVGV4dFBsYXllciA9IGdhbWUuYWRkLnRleHQoZ2FtZS53b3JsZC5jZW50ZXJYLTUwLCA1MCwgXCJcIiArIGdhbWUuc2NvcmVQbGF5ZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb250OiAnSW5jb25zb2xhdGEnLCBmb250U2l6ZTogNjB9KTtcclxuICAgICAgZ2FtZS5zY29yZVRleHRQbGF5ZXIuYW5jaG9yLnNldFRvKDAuNSk7XHJcbiAgICAgIFxyXG4gICAgICBnYW1lLnNjb3JlVGV4dE9wcG9uZW50ID0gZ2FtZS5hZGQudGV4dChnYW1lLndvcmxkLmNlbnRlclgrNTAsIDUwLCBcIlwiICsgZ2FtZS5zY29yZU9wcG9uZW50LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb250OiAnSW5jb25zb2xhdGEnLCBmb250U2l6ZTogNjB9KTtcclxuICAgICAgZ2FtZS5zY29yZVRleHRPcHBvbmVudC5hbmNob3Iuc2V0VG8oMC41KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCdXR0b25zKCk7XHJcbiAgICBjcmVhdGVMaW5lcygpO1xyXG4gICAgY3JlYXRlVGV4dCgpO1xyXG4gICAgY3JlYXRlQmV0cygpO1xyXG4gICAgcHJlcGFyZVBsYXllckJldCgpO1xyXG4gICAgY3JlYXRlQmFsbCgpO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLnBoeXNpY3MuYXJjYWRlLmNvbGxpZGUodGhpcy5iYWxsU3ByaXRlLCB0aGlzLmJldEdyb3VwLCB0aGlzLmNvbmxpc2lvblJhcXVldGEpO1xyXG4gICAgdGhpcy5tb3ZlT3Bwb25lbnQoKTtcclxuICAgIHRoaXMubW92ZVBsYXllcigpO1xyXG4gICAgdGhpcy5jaGFuZ2VCYWxsQ29sb3IoKTtcclxuICAgIHRoaXMuY2hlY2tHb2FsKCk7XHJcbiAgfSxcclxuXHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcclxuICAgIC8vIFNwcml0ZSBkZWJ1ZyBpbmZvXHJcbiAgICAvL3RoaXMuZ2FtZS5kZWJ1Zy5zcHJpdGVJbmZvKHRoaXMuYmFsbFNwcml0ZSwgMzIsIDMyKTtcclxuICB9LFxyXG5cclxuICBcclxuXHJcbiAgc2V0QmFsbDogZnVuY3Rpb24oZ29hbCkge1xyXG4gICAgdGhpcy5iYWxsU3ByaXRlLnggPSB0aGlzLndvcmxkLmNlbnRlclg7XHJcbiAgICB0aGlzLmJhbGxTcHJpdGUueSA9IHRoaXMud29ybGQuY2VudGVyWTtcclxuICAgIGdvYWwgPT09ICdwbGF5ZXInID8gdGhpcy5iYWxsU3ByaXRlLmJvZHkudmVsb2NpdHkuc2V0VG8oLTMwMCwgMzAwKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbFNwcml0ZS5ib2R5LnZlbG9jaXR5LnNldFRvKDMwMCwgMzAwKTtcclxuICB9LFxyXG4gIFxyXG4gIGNoYW5nZUJhbGxDb2xvcjogZnVuY3Rpb24oKSB7XHJcbiAgICBNYXRoLnJvdW5kKHRoaXMuYmFsbFNwcml0ZS54Lyh0aGlzLndvcmxkLndpZHRoLzUpKSUyID09PSAwID8gdGhpcy5iYWxsU3ByaXRlLmxvYWRUZXh0dXJlKHRoaXMuYmFsbFRleHR1cmUyKTogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbFNwcml0ZS5sb2FkVGV4dHVyZSh0aGlzLmJhbGxUZXh0dXJlMSk7XHJcbiAgfSxcclxuXHJcbiAgY2hlY2tHb2FsOiBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmJhbGxTcHJpdGUueCA9PT0gMCkge1xyXG4gICAgICB0aGlzLnNldEJhbGwoJ29wcG9uZW50Jyk7XHJcbiAgICAgIHRoaXMuc2NvcmVUZXh0T3Bwb25lbnQuc2V0VGV4dCh0aGlzLnNjb3JlT3Bwb25lbnQgKz0gMSk7XHJcbiAgICAgIGlmKHRoaXMuc2NvcmVPcHBvbmVudCA9PT0gNSlcclxuICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0VuZE1lbnUnKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5iYWxsU3ByaXRlLnggPT09IHRoaXMud29ybGQud2lkdGggLSB0aGlzLmJhbGxSYWRpdXMpIHtcclxuICAgICAgdGhpcy5zZXRCYWxsKCdwbGF5ZXInKTtcclxuICAgICAgdGhpcy5zY29yZVRleHRQbGF5ZXIuc2V0VGV4dCh0aGlzLnNjb3JlUGxheWVyICs9IDEpO1xyXG4gICAgICBpZih0aGlzLnNjb3JlUGxheWVyID09PSA1KVxyXG4gICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnRW5kTWVudScpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG1vdmVPcHBvbmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5vcHBvbmVudFNwcml0ZS55IC0gdGhpcy5iYWxsU3ByaXRlLnkgPCAtMTUpIHtcclxuICAgICAgdGhpcy5vcHBvbmVudFNwcml0ZS5ib2R5LnZlbG9jaXR5LnkgPSAyMDA7XHJcbiAgICB9IGVsc2UgaWYodGhpcy5vcHBvbmVudFNwcml0ZS55IC0gdGhpcy5iYWxsU3ByaXRlLnkgPiAxNSkge1xyXG4gICAgICB0aGlzLm9wcG9uZW50U3ByaXRlLmJvZHkudmVsb2NpdHkueSA9IC0yMDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wcG9uZW50U3ByaXRlLmJvZHkudmVsb2NpdHkueSA9IDA7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgbW92ZVBsYXllcjogZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5pbnB1dC5rZXlib2FyZC5pc0Rvd24oUGhhc2VyLktleWJvYXJkLlVQKSAmJiB0aGlzLnBsYXllclNwcml0ZS55ID4gMCl7XHJcbiAgICAgIHRoaXMucGxheWVyU3ByaXRlLnkgLT0gMTA7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQua2V5Ym9hcmQuaXNEb3duKFBoYXNlci5LZXlib2FyZC5ET1dOKSAmJiB0aGlzLnBsYXllclNwcml0ZS55IDwgdGhpcy53b3JsZC5oZWlnaHQpe1xyXG4gICAgICB0aGlzLnBsYXllclNwcml0ZS55ICs9IDEwO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgY29ubGlzaW9uUmFxdWV0YTogZnVuY3Rpb24oX2JhbGwsIF9iZXQpIHtcclxuICAgIHZhciBkaWZmID0gMDtcclxuICAgIGlmIChfYmFsbC55IDwgX2JldC55KSB7XHJcbiAgICAgIGRpZmYgPSBfYmV0LnkgLSBfYmFsbC55O1xyXG4gICAgICBfYmFsbC5ib2R5LnZlbG9jaXR5LnkgPSAoLTEwICogZGlmZik7XHJcbiAgICB9IGVsc2UgaWYgKF9iYWxsLnkgPiBfYmV0LnkpIHtcclxuICAgICAgZGlmZiA9IF9iYWxsLnkgLV9iZXQueTtcclxuICAgICAgX2JhbGwuYm9keS52ZWxvY2l0eS55ID0gKDEwICogZGlmZik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfYmFsbC5ib2R5LnZlbG9jaXR5LnkgPSAyICsgTWF0aC5yYW5kb20oKSAqIDEwO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGdvRnVsbDogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmdhbWUuc2NhbGUuaXNGdWxsU2NyZWVuID8gdGhpcy5zY2FsZS5zdG9wRnVsbFNjcmVlbigpIDogdGhpcy5zY2FsZS5zdGFydEZ1bGxTY3JlZW4oKTtcclxuICB9LFxyXG5cclxuICBwYXVzZUdhbWU6IGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLnBoeXNpY3MuYXJjYWRlLmlzUGF1c2VkID0gKHRoaXMucGh5c2ljcy5hcmNhZGUuaXNQYXVzZWQpID8gZmFsc2UgOiB0cnVlO1xyXG4gIH0sXHJcblxyXG4gIGhhbmRsZUluY29ycmVjdDogZnVuY3Rpb24oKXtcclxuICAgIGlmKCF0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3Ape1xyXG4gICAgIHRoaXMuZ2FtZS5wYXVzZWQgPSB0cnVlO1xyXG4gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHVyblwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBoYW5kbGVDb3JyZWN0OiBmdW5jdGlvbigpe1xyXG4gICAgaWYoIXRoaXMuZ2FtZS5kZXZpY2UuZGVza3RvcCl7XHJcbiAgICAgIHRoaXMuZ2FtZS5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInR1cm5cIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG59O1xyXG4iLCJQb25nLkVuZE1lbnUgPSBmdW5jdGlvbihnYW1lKSB7fTtcclxuXHJcblBvbmcuRW5kTWVudS5wcm90b3R5cGUgPSB7XHJcbiAgY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciB0ZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLndvcmxkLmNlbnRlclgsIDEwMCwgXCJHYW1lIE92ZXJcIik7XHJcbiAgICB0ZXh0LmFuY2hvci5zZXQoMC41KTtcclxuICAgIHRleHQuYWxpZ24gPSAnY2VudGVyJztcclxuICAgIHRleHQuZm9udCA9ICdBcmlhbCc7XHJcbiAgICB0ZXh0LmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICB0ZXh0LmZvbnRTaXplID0gNzA7XHJcbiAgICB0ZXh0LmZpbGwgPSAnIzAwMDAwMCc7XHJcbiAgICB0ZXh0LnNldFNoYWRvdygzLCAzLCAncmdiYSgwLDAsMCwwLjUpJywgNSk7XHJcblxyXG4gICAgdGhpcy5zdGFydEJ1dHRvbiA9IHRoaXMuYWRkLmJ1dHRvbih0aGlzLndvcmxkLmNlbnRlclgsIDIyNSwgJ2J1dHRvblN0YXJ0JywgdGhpcy5zdGFydEdhbWUsIHRoaXMsIDIsIDAsIDEpO1xyXG4gICAgdGhpcy5zdGFydEJ1dHRvbi5hbmNob3Iuc2V0KDAuNSwwKTtcclxuICAgIHRoaXMuc3RhcnRCdXR0b24uaW5wdXQudXNlSGFuZEN1cnNvciA9IHRydWU7XHJcbiAgfSxcclxuICBzdGFydEdhbWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lJyk7XHJcbiAgfVxyXG59OyIsIihmdW5jdGlvbigpIHtcclxuICB2YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg0ODAsIDMyMCwgUGhhc2VyLkNBTlZBUywgJycpO1xyXG4gIGdhbWUuc3RhdGUuYWRkKCdCb290JywgUG9uZy5Cb290KTtcclxuICBnYW1lLnN0YXRlLmFkZCgnUHJlbG9hZGVyJywgUG9uZy5QcmVsb2FkZXIpO1xyXG4gIGdhbWUuc3RhdGUuYWRkKCdNYWluTWVudScsIFBvbmcuTWFpbk1lbnUpO1xyXG4gIGdhbWUuc3RhdGUuYWRkKCdHYW1lJywgUG9uZy5HYW1lKTtcclxuICBnYW1lLnN0YXRlLmFkZCgnRW5kTWVudScsIFBvbmcuRW5kTWVudSk7XHJcblxyXG4gIGdhbWUuc3RhdGUuc3RhcnQoJ0Jvb3QnKTtcclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=